<!DOCTYPE html>
<html>
    <head>
        <title>
            Trainstop Calc
        </title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="Trainstop_styles.css">
        <!-- <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> -->

    </head>
    <body>
        <h1>Braking Calculator v1.0</h1>
        <h2>Enter Known Values</h2>

        <script src="Trainstop_calc.js" ></script>
        <!-- This script is needed for the toggle_units function in js. Need to learn about jquery & ajax-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> 

        <form action="" id="form">
            <label for="accel">Enter braking/acceleration Rate (in m/s&sup2;):</label><br>
            <input type="text" id="accel" class="inputs"><br><br>

        <div class="presets">
            <div class = "accel_presets">
                <h4>Acceleration Presets</h4>
            <label class="preset" for="radio">EMU Acceleration</label>
            <input id="emu_accel" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "EMU Acceleration"><br>
            <label class="preset" for="Nclass">Nclass Acceleration</label>
            <input id="vlocity_accel" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "NClass Acceleration"><br>
            <label class="preset" for="Vlocity">Vlocity Acceleration</label>
            <input id="nclass_accel" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "Vlocity Acceleration"><br> 
            <label class="preset" for="Sprinter">Sprinter Acceleration</label>
            <input id="sprinter_accel" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "Sprinter Acceleration"><br> 
            </div>

            <div class = "service_brake_presets">
                <h4>service Braking Presets</h4>
            <label class="preset" for="radio">EMU service braking</label>
            <input id="emu_sb" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "EMU service braking"><br>
            <label class="preset" for="Nclass">Nclass service braking</label>
            <input id="vlocity_sb" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "NClass service braking"><br>
            <label class="preset" for="Vlocity">Vlocity service braking</label>
            <input id="nclass_sb" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "Vlocity service braking"><br> 
            <label class="preset" for="Sprinter">Sprinter service braking</label>
            <input id="sprinter_sb" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "Sprinter service braking"><br> 
            </div>

            <div class = "emergency_brake_presets">
                <h4>Emergency Braking Presets</h4>
            <label class="preset" for="radio">EMU emergency braking</label>
            <input id="emu_eb" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "EMU emergency braking"><br>
            <label class="preset" for="Nclass">Nclass emergency braking</label>
            <input id="vlocity_eb" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "NClass emergency braking"><br>
            <label class="preset" for="Vlocity">Vlocity emergency braking</label>
            <input id="nclass_eb" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "Vlocity emergency braking"><br> 
            <label class="preset" for="Sprinter">Sprinter emergency braking</label>
            <input id="sprinter_eb" type="radio" name = "accel_preset" onclick="acceleration_preset()" value= "Sprinter emergency braking"><br> 
            </div>
        </div>


            <label for="initial_vel">Initial speed (in m/s):</label><br>
            <input type="text" id="initial_vel" class="inputs"><br><br>
            <label for="final_vel">Final speed (in m/s):</label><br>
            <input type="text" id="final_vel" class="inputs"><br><br>
            <label for="time">Time (in s):</label><br>
            <input type="text" id="time" class="inputs"><br><br>
            <label for="time">Distance (in m):</label><br>
            <input type="text" id="distance" class="inputs"><br><br>
            <label for="gradient">Gradient (%):</label><br>
            <input type="text" id="grad" class="inputs"><br><br>
            
            <button type="button"  onclick="main()"> 
                Calculate! 
            </button> 
            <!---<input type="submit" value="Submit"> --->
            <input type="reset" value="Clear Fields" onclick="enable_acceleration_input()">

        </form>

        <!--- THIS MAKES EMPTY TALE. JS WILL FILL THE TABLE-->
        <table id="calculation_table">
            <thead>
                <tr>
                    <th>Calc<br>no.</th>
                    <th>Initial Speed<br>                  
                        <label class="switch">
                            <input class="v_toggle" id="vi_units" type="checkbox"onclick="toggle_units()">
                            <span class="slider round"></span>
                            <p style="font-size:10px">(m/s) | (km/h)</p>
                        </label> 
                    </th>
                    <th>Final Speed <br>                      
                        <label class="switch">
                                <input class="v_toggle" id="vf_units" type="checkbox" onclick="toggle_units()">
                                <span class="slider round"></span>
                                <p style="font-size:10px">(m/s) | (km/h)</p>
                        </label> 
                    </th>
                    <th>Time (s) </th>
                    <th>Distance (m)</th>
                    <th>Average acceleration (m/s&sup2;) </th>
                    <th>Average Gradient <br>                    
                        <label class="switch">
                            <input id="grad_units" type="checkbox" onclick="toggle_grad()">
                            <span class="slider round"></span>
                            <p style="font-size:10px">(%) | (ratio)</p>
                        </label> 
                    </th>
                    <th>Preset </th>
            
                </tr>
            </thead>


        </table>
        
        <labe for="calculation_table" id="note">This table will fill automatically. Note: caluclated values are shown in red.
        </label>



        <ul style="color: blueviolet;" >THINGS TO IMPLEMENT:
            <li>Braking presets</li>
            <li>adjust gradients for all calcs</li>
            <li>show calculation types</li>
            <li>safety factor in calcs</li>
            <li>use interpolation to make results slightly more accurate</li>
            <li>warn user: V/line stopping < 40km/h not accurate.</li>
            <li>show predicted factor of safety change with trains/speed</li>

            <li>Export to csv</li>
            <li>clear calculation button</li>
            <li>do not allow listing two duplicate calculations</li>
            <li>Toggles for m/s & k/h</li>
            <li>Replace acceleration with actual average val</li>
            <li>make it pretty</li> 
            <li>combine acceleration/deceleration and constant phase</li>
            <li>make gradient calc</li>
            <li>make headway calcs</li>
            <li>include "common" presets- e.g 0-line speed or line speed- braking</li>
             </ul>
    </body>
</html>